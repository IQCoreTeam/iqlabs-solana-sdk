/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from "@solana/kit";
import { CODE_IN_PROGRAM_ADDRESS } from "../programs";

/** NotAuthorized: Not authorized. */
export const CODE_IN_ERROR__NOT_AUTHORIZED = 0x1770; // 6000
/** InvalidInstructionData: Invalid instruction data. */
export const CODE_IN_ERROR__INVALID_INSTRUCTION_DATA = 0x1771; // 6001
/** InvalidAccount: Invalid account. */
export const CODE_IN_ERROR__INVALID_ACCOUNT = 0x1772; // 6002
/** TooLong: Data too long. */
export const CODE_IN_ERROR__TOO_LONG = 0x1773; // 6003
/** Overflow: Overflow. */
export const CODE_IN_ERROR__OVERFLOW = 0x1774; // 6004
/** NeedsRealloc: Reallocation required (not performed). */
export const CODE_IN_ERROR__NEEDS_REALLOC = 0x1775; // 6005
/** InsufficientFunds: Insufficient funds to send code. */
export const CODE_IN_ERROR__INSUFFICIENT_FUNDS = 0x1776; // 6006
/** ReceiverAccountNotFound: Receiver account not found. */
export const CODE_IN_ERROR__RECEIVER_ACCOUNT_NOT_FOUND = 0x1777; // 6007
/** InvalidWallet: Invalid wallet address. */
export const CODE_IN_ERROR__INVALID_WALLET = 0x1778; // 6008
/** InvalidReceiver: Invalid receiver address. */
export const CODE_IN_ERROR__INVALID_RECEIVER = 0x1779; // 6009
/** FundsNotReceived: Funds were not received by the expected wallet. */
export const CODE_IN_ERROR__FUNDS_NOT_RECEIVED = 0x177a; // 6010
/** InvalidCodeFormat: Invalid code format. */
export const CODE_IN_ERROR__INVALID_CODE_FORMAT = 0x177b; // 6011
/** InvalidTransfer: Invalid transfer. */
export const CODE_IN_ERROR__INVALID_TRANSFER = 0x177c; // 6012
/** NotWhitelisted: Not whitelisted (Merkle proof failed). */
export const CODE_IN_ERROR__NOT_WHITELISTED = 0x177d; // 6013
/** SessionFinalized: Session already finalized. */
export const CODE_IN_ERROR__SESSION_FINALIZED = 0x177e; // 6014
/** EmptyName: Name cannot be empty. */
export const CODE_IN_ERROR__EMPTY_NAME = 0x177f; // 6015
/** EmptyColumns: At least one column is required. */
export const CODE_IN_ERROR__EMPTY_COLUMNS = 0x1780; // 6016
/** EmptyIdCol: ID column is required. */
export const CODE_IN_ERROR__EMPTY_ID_COL = 0x1781; // 6017
/** IdColNotInColumns: ID column must exist in column_names. */
export const CODE_IN_ERROR__ID_COL_NOT_IN_COLUMNS = 0x1782; // 6018
/** TableExists: Table already exists. */
export const CODE_IN_ERROR__TABLE_EXISTS = 0x1783; // 6019
/** InvalidMetadataLength: Invalid metadata length. */
export const CODE_IN_ERROR__INVALID_METADATA_LENGTH = 0x1784; // 6020
/** InvalidDbRootId: Root id must be <= 32 bytes. */
export const CODE_IN_ERROR__INVALID_DB_ROOT_ID = 0x1785; // 6021
/** InvalidUtf8: Invalid UTF-8. */
export const CODE_IN_ERROR__INVALID_UTF8 = 0x1786; // 6022
/** SchemaMismatch: Schema mismatch. */
export const CODE_IN_ERROR__SCHEMA_MISMATCH = 0x1787; // 6023
/** InvalidConnectionStatus: Invalid connection status. */
export const CODE_IN_ERROR__INVALID_CONNECTION_STATUS = 0x1788; // 6024
/** InvalidConnectionTransition: Invalid connection status transition. */
export const CODE_IN_ERROR__INVALID_CONNECTION_TRANSITION = 0x1789; // 6025
/** NameTooLong: Table name too long. */
export const CODE_IN_ERROR__NAME_TOO_LONG = 0x178a; // 6026

export type CodeInError =
  | typeof CODE_IN_ERROR__EMPTY_COLUMNS
  | typeof CODE_IN_ERROR__EMPTY_ID_COL
  | typeof CODE_IN_ERROR__EMPTY_NAME
  | typeof CODE_IN_ERROR__FUNDS_NOT_RECEIVED
  | typeof CODE_IN_ERROR__ID_COL_NOT_IN_COLUMNS
  | typeof CODE_IN_ERROR__INSUFFICIENT_FUNDS
  | typeof CODE_IN_ERROR__INVALID_ACCOUNT
  | typeof CODE_IN_ERROR__INVALID_CODE_FORMAT
  | typeof CODE_IN_ERROR__INVALID_CONNECTION_STATUS
  | typeof CODE_IN_ERROR__INVALID_CONNECTION_TRANSITION
  | typeof CODE_IN_ERROR__INVALID_DB_ROOT_ID
  | typeof CODE_IN_ERROR__INVALID_INSTRUCTION_DATA
  | typeof CODE_IN_ERROR__INVALID_METADATA_LENGTH
  | typeof CODE_IN_ERROR__INVALID_RECEIVER
  | typeof CODE_IN_ERROR__INVALID_TRANSFER
  | typeof CODE_IN_ERROR__INVALID_UTF8
  | typeof CODE_IN_ERROR__INVALID_WALLET
  | typeof CODE_IN_ERROR__NAME_TOO_LONG
  | typeof CODE_IN_ERROR__NEEDS_REALLOC
  | typeof CODE_IN_ERROR__NOT_AUTHORIZED
  | typeof CODE_IN_ERROR__NOT_WHITELISTED
  | typeof CODE_IN_ERROR__OVERFLOW
  | typeof CODE_IN_ERROR__RECEIVER_ACCOUNT_NOT_FOUND
  | typeof CODE_IN_ERROR__SCHEMA_MISMATCH
  | typeof CODE_IN_ERROR__SESSION_FINALIZED
  | typeof CODE_IN_ERROR__TABLE_EXISTS
  | typeof CODE_IN_ERROR__TOO_LONG;

let codeInErrorMessages: Record<CodeInError, string> | undefined;
if (process.env.NODE_ENV !== "production") {
  codeInErrorMessages = {
    [CODE_IN_ERROR__EMPTY_COLUMNS]: `At least one column is required.`,
    [CODE_IN_ERROR__EMPTY_ID_COL]: `ID column is required.`,
    [CODE_IN_ERROR__EMPTY_NAME]: `Name cannot be empty.`,
    [CODE_IN_ERROR__FUNDS_NOT_RECEIVED]: `Funds were not received by the expected wallet.`,
    [CODE_IN_ERROR__ID_COL_NOT_IN_COLUMNS]: `ID column must exist in column_names.`,
    [CODE_IN_ERROR__INSUFFICIENT_FUNDS]: `Insufficient funds to send code.`,
    [CODE_IN_ERROR__INVALID_ACCOUNT]: `Invalid account.`,
    [CODE_IN_ERROR__INVALID_CODE_FORMAT]: `Invalid code format.`,
    [CODE_IN_ERROR__INVALID_CONNECTION_STATUS]: `Invalid connection status.`,
    [CODE_IN_ERROR__INVALID_CONNECTION_TRANSITION]: `Invalid connection status transition.`,
    [CODE_IN_ERROR__INVALID_DB_ROOT_ID]: `Root id must be <= 32 bytes.`,
    [CODE_IN_ERROR__INVALID_INSTRUCTION_DATA]: `Invalid instruction data.`,
    [CODE_IN_ERROR__INVALID_METADATA_LENGTH]: `Invalid metadata length.`,
    [CODE_IN_ERROR__INVALID_RECEIVER]: `Invalid receiver address.`,
    [CODE_IN_ERROR__INVALID_TRANSFER]: `Invalid transfer.`,
    [CODE_IN_ERROR__INVALID_UTF8]: `Invalid UTF-8.`,
    [CODE_IN_ERROR__INVALID_WALLET]: `Invalid wallet address.`,
    [CODE_IN_ERROR__NAME_TOO_LONG]: `Table name too long.`,
    [CODE_IN_ERROR__NEEDS_REALLOC]: `Reallocation required (not performed).`,
    [CODE_IN_ERROR__NOT_AUTHORIZED]: `Not authorized.`,
    [CODE_IN_ERROR__NOT_WHITELISTED]: `Not whitelisted (Merkle proof failed).`,
    [CODE_IN_ERROR__OVERFLOW]: `Overflow.`,
    [CODE_IN_ERROR__RECEIVER_ACCOUNT_NOT_FOUND]: `Receiver account not found.`,
    [CODE_IN_ERROR__SCHEMA_MISMATCH]: `Schema mismatch.`,
    [CODE_IN_ERROR__SESSION_FINALIZED]: `Session already finalized.`,
    [CODE_IN_ERROR__TABLE_EXISTS]: `Table already exists.`,
    [CODE_IN_ERROR__TOO_LONG]: `Data too long.`,
  };
}

export function getCodeInErrorMessage(code: CodeInError): string {
  if (process.env.NODE_ENV !== "production") {
    return (codeInErrorMessages as Record<CodeInError, string>)[code];
  }

  return "Error message not available in production bundles.";
}

export function isCodeInError<TProgramErrorCode extends CodeInError>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode,
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    CODE_IN_PROGRAM_ADDRESS,
    code,
  );
}
